<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a responsive product landing page.">
    <title>Landing Page &ndash; Layout Examples &ndash; Pure</title>
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css"
        integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous">
    <link rel="stylesheet" href="https://purecss.io/css/pure/grids-responsive-min.css">
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <div class="header">
        <div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
            <span style="color: white;">Welcome to micro-frontends demo</span>

            <ul class="pure-menu-list">
                <li class="pure-menu-item pure-menu-selected"><a href="#" class="pure-menu-link">Home</a></li>
                <li class="pure-menu-item"><a href="#" class="pure-menu-link">Cart

                    </a></li>
            </ul>
        </div>
    </div>

    <section>
        <div>

    <h3>Select one or more items</h3>
    <section id="productsAppView">
        <span><products-comp id="productsApp" data-request="" data-response=""></products-comp>
            <iframe id="cartIFrame" style="border:none;" src="" height="200" width="200" scrolling="true"></iframe></span>
    </section>
    </div>
    <div class="footer l-box is-center">
        &nbsp;
    </div>
</section>

<script>
    document.getElementById("productsApp").addEventListener('selectedFruits', e => {
        if (e.detail != null && e.detail.length > 0) {
            console.log(">>> products evt recd: ", e);
            this.dispatchEvent(
                new CustomEvent('cartLoaded', {})
            );
            document.getElementById("cartIFrame").setAttribute("src", "http://localhost:8080/cartApp.html");
        }
    });
    window.addEventListener('message', e => {
            console.log(">>> cart evt recd: ", e);
            document.getElementById("cartIFrame").setAttribute("src", "");
    });
    </script>
    <!-- web components -->
    <script src="products-comp.js"></script>
    <!-- app js -->
    <!-- <script src="homeApp.js"></script> -->
</body>

</html>